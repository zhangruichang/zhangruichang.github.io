<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Richard › 最长回文子串</title>
  <meta name="author" content="Richard">
  
  <meta name="description" content="理查德爱闹">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="最长回文子串"/>
  <meta property="og:site_name" content="Richard"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Richard" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5353535-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">Richard</a></h1>
  <h2 id="header-h2">IT small bird</h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/">首页</a></li>
      
      <li><a href="/archives">文章归档</a></li>
      
      <li><a href="/links">友情链接</a></li>
      
      <li><a href="/about">关于</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title">最长回文子串</h1>
  

      
      <time datetime="2014-07-09T06:26:34.000Z">7月 9 2014</time>
      
    </header>
    <div class="entry">
      
        <p>hihocoder 的一道题目，说是很经典的题目，但是自己还没做过，看来非ACMer差距还是巨大的。。<br>然后自己搞了半天也只搞出了O(n^2)的算法，看了一下线性算法，太复杂了，本吊估计是想不出了。</p>
<p>附上O(n^2)的基于移动中心的算法</p>
<pre><code><span class="preprocessor">#include &lt;map&gt;</span>
<span class="preprocessor">#include &lt;set&gt;</span>
<span class="preprocessor">#include &lt;queue&gt;</span>
<span class="preprocessor">#include &lt;stack&gt;</span>
<span class="preprocessor">#include &lt;math.h&gt;</span>
<span class="preprocessor">#include &lt;time.h&gt;</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;limits.h&gt;</span>
<span class="preprocessor">#include &lt;string.h&gt;</span>
<span class="preprocessor">#include &lt;string&gt;</span>
<span class="preprocessor">#include &lt;algorithm&gt;</span>
<span class="preprocessor">#include &lt;sstream&gt;</span>
<span class="preprocessor">#include &lt;iomanip&gt;</span>
<span class="preprocessor">#define Min(a,b) (((a) &lt; (b)) ? (a) : (b))</span>
<span class="preprocessor">#define Max(a,b) (((a) &gt; (b)) ? (a) : (b))</span>
<span class="preprocessor">#define read freopen("in.txt","r",stdin)  </span>
<span class="preprocessor">#define write freopen("out.txt","w",stdout)</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;
<span class="keyword">int</span> maxdrome(<span class="built_in">string</span> str)<span class="comment">//O(n^3)</span>
{
    <span class="keyword">int</span> maxlen=<span class="number">1</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> length=<span class="number">2</span>;length&lt;=str.size();length++)<span class="comment">//length</span>
    {
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=str.size()-<span class="number">2</span>;i++)<span class="comment">//start index</span>
        {
            <span class="comment">//for(int j=i+1;j&lt;=n-1;j++)</span>
            <span class="comment">//{</span>
            <span class="keyword">if</span>(i+length-<span class="number">1</span>&gt;=str.size()) <span class="keyword">continue</span>;
            <span class="keyword">int</span> k;
            <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;length/<span class="number">2</span>;k++)
            {
                <span class="keyword">if</span>(str[i+ k]==str[i+length-<span class="number">1</span> - k])
                    ;
                <span class="keyword">else</span>
                    <span class="keyword">break</span>;
            }
            <span class="keyword">if</span>(k==length/<span class="number">2</span>)
            {
                <span class="keyword">if</span>(maxlen&lt;length)
                    maxlen=length;
            }
            <span class="comment">//}</span>
        }
    }
    <span class="keyword">return</span> maxlen;
}
<span class="keyword">int</span> maxdrome_centre(<span class="built_in">string</span> str)
{
    <span class="keyword">if</span>(str.size()==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">int</span> maxlen=<span class="number">1</span>,max;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;str.size()-<span class="number">1</span>;i++)
    {
        max=<span class="number">1</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=(str.size()-<span class="number">1</span>)/<span class="number">2</span>;j++)<span class="comment">//two</span>
        {
            <span class="keyword">if</span>(i-j&gt;=<span class="number">0</span> &amp;&amp; i+j &lt;=str.size()-<span class="number">1</span>)
            {
                <span class="keyword">if</span>(str[i-j] == str[i+j])
                    max+=<span class="number">2</span>;
                <span class="keyword">else</span>
                    <span class="keyword">break</span>;
            }
            <span class="keyword">else</span>
                <span class="keyword">break</span>;
        }
        <span class="keyword">if</span>(max&gt;maxlen)
            maxlen=max;
        max=<span class="number">1</span>;
        <span class="keyword">if</span>(str[i]==str[i+<span class="number">1</span>])
        {
            max++;
            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=(str.size()-<span class="number">2</span>)/<span class="number">2</span>;j++)
            {
                <span class="keyword">if</span>(i-j&gt;=<span class="number">0</span> &amp;&amp; i+<span class="number">1</span>+j&lt;=str.size()-<span class="number">1</span> )
                {
                    <span class="keyword">if</span>(str[i-j]==str[i+<span class="number">1</span>+j])
                        max+=<span class="number">2</span>;
                    <span class="keyword">else</span>
                        <span class="keyword">break</span>;
                }
                <span class="keyword">else</span>
                    <span class="keyword">break</span>;
            }
            <span class="keyword">if</span>(max&gt;maxlen)
                maxlen=max;
        }


    }
    <span class="keyword">return</span> maxlen;
}
<span class="keyword">int</span> main()
{
    <span class="comment">//read;</span>
    <span class="comment">//write;</span>
    <span class="keyword">int</span> n;
    <span class="comment">//cin.clear();</span>
    <span class="comment">//cin&gt;&gt;n;</span>
    <span class="comment">//cin.clear();</span>
    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);
    <span class="built_in">string</span> str;
    <span class="comment">//cin&gt;&gt;str;</span>
    getline(<span class="built_in">cin</span>,str);
    <span class="keyword">while</span>(n&gt;<span class="number">0</span>)
    {
        getline(<span class="built_in">cin</span>,str);
        <span class="comment">//if(str.size()==0)</span>
        <span class="comment">//    break;</span>
        <span class="built_in">cout</span>&lt;&lt;maxdrome_centre(str)&lt;&lt;endl;
        n--;
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>我当时还请教了高富帅，发现他好像也没有想出线性算法，关键是里面有个推导出了一个不等式性质，<br>P[i] &gt;= MIN(P[2 * id - i], mx - i)</p>
<p>线性算法是基于这个不等式的，数学不够屌是搞不出来的，或者之前做过，我现在也没完全理清楚这个头绪，咳。。。</p>
<p>之前写了一个O(n^3) O(n^2)的算法，感觉很像是最长字段和从n^3 一直杀到线性，正如Lucida所说大为所快，但是最后线性的其实<br>不算是DP，我也没搞出来。。</p>
<p><a href="http://blog.163.com/zhaohai_1988/blog/static/2095100852012716105847112/" target="_blank" rel="external">http://blog.163.com/zhaohai_1988/blog/static/2095100852012716105847112/</a></p>

      
    </div>
    
    <footer>
      <div class="alignleft">
      
  
  <div class="categories">
    <a href="/categories/hihocode/">hihocode</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/brute-force/">brute force</a>, <a href="/tags/dp/">dp</a>, <a href="/tags/linear/">linear</a>
  </div>

      </div>
      <div class="clearfix"></div>
    </footer>
    
  </div>
</article>


<section id="comment">
  
            <!-- Duoshuo Comment BEGIN -->
            <div class="ds-thread"></div>
            <script type="text/javascript">
                var duoshuoQuery = {short_name:"jiabin"};
                (function() {
                    var ds = document.createElement('script');
                    ds.type = 'text/javascript';ds.async = true;
                    ds.src = 'http://static.duoshuo.com/embed.js';
                    ds.charset = 'UTF-8';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
                })();
            </script>
            <!-- Duoshuo Comment END -->
      
  
</section>

</div></div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="inner"><div class="alignleft">
  <p>
  
    &copy; 2014 Richard
  
  </p>
  <p>
    Theme By <a href="http://jiabin.tk" >Byron</a> based on <a href="https://github.com/willerce/hexo-theme-noderce" >Noderce</a>
  </p>

</div>
<div class="clearfix"></div></div></footer>
  <script type="text/javascript">

</script>

</body>
</html>
