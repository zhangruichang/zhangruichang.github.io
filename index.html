<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Richard</title>
  <meta name="author" content="Richard">
  
  <meta name="description" content="理查德爱闹">
  
  
  
  <meta property="og:site_name" content="Richard"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://xxx.xx/atom.xml" title="Richard" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">Richard</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="http://admis.fudan.edu.cn/~rczhang">About Me</a><li>
    
      <li class="cell"><a class="next" href="http://blog.csdn.net/richardzrc">Csdn Blog</a><li>
    
      <li class="cell"><a class="next" href="http://richard_zhang.drivehq.com/">Previous Page</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
  <iframe width="100%" height="750" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=750&fansRow=2&ptype=1&speed=0&skin=6&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2689136623&verifier=c139aa37&dpc=1"></iframe>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/AVL/">AVL</a><small>1</small></li>
  
    <li><a href="/categories/BT/">BT</a><small>1</small></li>
  
    <li><a href="/categories/Binary-Tree/">Binary Tree</a><small>1</small></li>
  
    <li><a href="/categories/BinaryTree/">BinaryTree</a><small>1</small></li>
  
    <li><a href="/categories/C/">C</a><small>3</small></li>
  
    <li><a href="/categories/C++/">C++</a><small>1</small></li>
  
    <li><a href="/categories/DFA/">DFA</a><small>1</small></li>
  
    <li><a href="/categories/DFS/">DFS</a><small>1</small></li>
  
    <li><a href="/categories/DP/">DP</a><small>3</small></li>
  
    <li><a href="/categories/GCD/">GCD</a><small>1</small></li>
  
    <li><a href="/categories/Linklist/">Linklist</a><small>1</small></li>
  
    <li><a href="/categories/Machine-Learning/">Machine Learning</a><small>1</small></li>
  
    <li><a href="/categories/Recursive/">Recursive</a><small>1</small></li>
  
    <li><a href="/categories/STL/">STL</a><small>1</small></li>
  
    <li><a href="/categories/Trie/">Trie</a><small>1</small></li>
  
    <li><a href="/categories/Union-find-set/">Union-find set</a><small>1</small></li>
  
    <li><a href="/categories/algorithm/">algorithm</a><small>15</small></li>
  
    <li><a href="/categories/app/">app</a><small>1</small></li>
  
    <li><a href="/categories/backtrack/">backtrack</a><small>2</small></li>
  
    <li><a href="/categories/bfs/">bfs</a><small>1</small></li>
  
    <li><a href="/categories/bfs,-dfs/">bfs, dfs</a><small>1</small></li>
  
    <li><a href="/categories/binary-search/">binary search</a><small>2</small></li>
  
    <li><a href="/categories/binary-tree/">binary tree</a><small>5</small></li>
  
    <li><a href="/categories/bit/">bit</a><small>1</small></li>
  
    <li><a href="/categories/bit-operation/">bit operation</a><small>2</small></li>
  
    <li><a href="/categories/blog/">blog</a><small>1</small></li>
  
    <li><a href="/categories/c-language/">c language</a><small>2</small></li>
  
    <li><a href="/categories/catalan/">catalan</a><small>1</small></li>
  
    <li><a href="/categories/complex-condition-anaysis/">complex condition anaysis</a><small>1</small></li>
  
    <li><a href="/categories/cpp/">cpp</a><small>13</small></li>
  
    <li><a href="/categories/cpp-string/">cpp string</a><small>1</small></li>
  
    <li><a href="/categories/data-structure/">data structure</a><small>4</small></li>
  
    <li><a href="/categories/dfs/">dfs</a><small>1</small></li>
  
    <li><a href="/categories/dfs,-non-recursive/">dfs, non-recursive</a><small>1</small></li>
  
    <li><a href="/categories/dp/">dp</a><small>7</small></li>
  
    <li><a href="/categories/ds/">ds</a><small>2</small></li>
  
    <li><a href="/categories/easy-programming/">easy programming</a><small>1</small></li>
  
    <li><a href="/categories/experience/">experience</a><small>1</small></li>
  
    <li><a href="/categories/gechao-principle/">gechao principle</a><small>1</small></li>
  
    <li><a href="/categories/git/">git</a><small>1</small></li>
  
    <li><a href="/categories/greedy-problem/">greedy problem</a><small>1</small></li>
  
    <li><a href="/categories/hash/">hash</a><small>1</small></li>
  
    <li><a href="/categories/heap/">heap</a><small>2</small></li>
  
    <li><a href="/categories/hexo-configuration/">hexo configuration</a><small>1</small></li>
  
    <li><a href="/categories/hihocode/">hihocode</a><small>1</small></li>
  
    <li><a href="/categories/install-os/">install os</a><small>1</small></li>
  
    <li><a href="/categories/integer/">integer</a><small>1</small></li>
  
    <li><a href="/categories/kmp/">kmp</a><small>1</small></li>
  
    <li><a href="/categories/latex/">latex</a><small>1</small></li>
  
    <li><a href="/categories/linklist/">linklist</a><small>9</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/loading-force/">loading force</a><small>1</small></li>
  
    <li><a href="/categories/logic/">logic</a><small>1</small></li>
  
    <li><a href="/categories/math/">math</a><small>3</small></li>
  
    <li><a href="/categories/math-rule/">math rule</a><small>1</small></li>
  
    <li><a href="/categories/matlab-programming/">matlab programming</a><small>1</small></li>
  
    <li><a href="/categories/novel/">novel</a><small>1</small></li>
  
    <li><a href="/categories/number-theory/">number theory</a><small>1</small></li>
  
    <li><a href="/categories/permutation/">permutation</a><small>2</small></li>
  
    <li><a href="/categories/probability/">probability</a><small>1</small></li>
  
    <li><a href="/categories/programming/">programming</a><small>1</small></li>
  
    <li><a href="/categories/quick-and-right-coding/">quick and right coding</a><small>1</small></li>
  
    <li><a href="/categories/scanf/">scanf</a><small>1</small></li>
  
    <li><a href="/categories/screen/">screen</a><small>1</small></li>
  
    <li><a href="/categories/screen-alg/">screen alg</a><small>1</small></li>
  
    <li><a href="/categories/sequence/">sequence</a><small>1</small></li>
  
    <li><a href="/categories/sorting/">sorting</a><small>1</small></li>
  
    <li><a href="/categories/string/">string</a><small>1</small></li>
  
    <li><a href="/categories/swap/">swap</a><small>1</small></li>
  
    <li><a href="/categories/time-complexity/">time complexity</a><small>1</small></li>
  
    <li><a href="/categories/vote/">vote</a><small>1</small></li>
  
    <li><a href="/categories/web/">web</a><small>2</small></li>
  
    <li><a href="/categories/数字规律/">数字规律</a><small>1</small></li>
  
    <li><a href="/categories/树形DP/">树形DP</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/BST/" style="font-size: 12.50px;">BST</a><a href="/tags/BT/" style="font-size: 15.00px;">BT</a><a href="/tags/Backtrack/" style="font-size: 10.00px;">Backtrack</a><a href="/tags/Bayesian-graph-model/" style="font-size: 10.00px;">Bayesian graph model</a><a href="/tags/C/" style="font-size: 17.50px;">C</a><a href="/tags/C++/" style="font-size: 10.00px;">C++</a><a href="/tags/Combinations/" style="font-size: 10.00px;">Combinations</a><a href="/tags/DFA/" style="font-size: 10.00px;">DFA</a><a href="/tags/DP/" style="font-size: 17.50px;">DP</a><a href="/tags/GCD/" style="font-size: 10.00px;">GCD</a><a href="/tags/OO/" style="font-size: 10.00px;">OO</a><a href="/tags/Order/" style="font-size: 10.00px;">Order</a><a href="/tags/Permutation/" style="font-size: 10.00px;">Permutation</a><a href="/tags/PostOrder/" style="font-size: 10.00px;">PostOrder</a><a href="/tags/STL/" style="font-size: 10.00px;">STL</a><a href="/tags/Trie/" style="font-size: 10.00px;">Trie</a><a href="/tags/Union-find-set/" style="font-size: 10.00px;">Union-find set</a><a href="/tags/algorithm/" style="font-size: 20.00px;">algorithm</a><a href="/tags/app/" style="font-size: 10.00px;">app</a><a href="/tags/array/" style="font-size: 17.50px;">array</a><a href="/tags/back-n-node/" style="font-size: 10.00px;">back n node</a><a href="/tags/backtrack/" style="font-size: 10.00px;">backtrack</a><a href="/tags/bfs/" style="font-size: 12.50px;">bfs</a><a href="/tags/binary-search/" style="font-size: 15.00px;">binary search</a><a href="/tags/binary-search-tree/" style="font-size: 10.00px;">binary search tree</a><a href="/tags/bit/" style="font-size: 15.00px;">bit</a><a href="/tags/brute-force/" style="font-size: 12.50px;">brute force</a><a href="/tags/c/" style="font-size: 10.00px;">c</a><a href="/tags/c-language/" style="font-size: 12.50px;">c language</a><a href="/tags/catalan/" style="font-size: 10.00px;">catalan</a><a href="/tags/category-analysis/" style="font-size: 10.00px;">category analysis</a><a href="/tags/char/" style="font-size: 10.00px;">char*</a><a href="/tags/cin/" style="font-size: 10.00px;">cin</a><a href="/tags/coding/" style="font-size: 10.00px;">coding</a><a href="/tags/combination/" style="font-size: 10.00px;">combination</a><a href="/tags/complement/" style="font-size: 10.00px;">complement</a><a href="/tags/complex/" style="font-size: 12.50px;">complex</a><a href="/tags/complex-condition-analysis/" style="font-size: 12.50px;">complex condition analysis</a><a href="/tags/condition-analysis/" style="font-size: 10.00px;">condition analysis</a><a href="/tags/configuire/" style="font-size: 10.00px;">configuire</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2015 Richard
  
</div>



</footer>
    </aside>
    
    
    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">Richard</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/13/shared_ptr/">shared_ptr</a></h1>
  

      <time datetime="2015-03-13T11:57:42.000Z"><a href="/2015/03/13/shared_ptr/">3月 13 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>shared_ptr用法。<br>赋值运算符函数，直接上代码: )</p>
<pre><code><span class="attribute">r-&gt;left</span>=<span class="string">make_shared&lt;Node&gt;(); </span>
</code></pre><p>这段调用了make_shared来构造一个临时的shared_ptr对象，其实SP就是封装了指针，使得内存使用安全的类，这里会调用Node的构造函数，然后我们定义在这里。其他用法都不对，例如<br>r-&gt;left=new Node(), 因为Node*不能赋值给shared_ptr<node>, r-&gt;left(new Node), 这种也不行，因为这里不是构造函数，而是赋值运算符函数。</node></p>
<p>struct Node<br>{<br>    int value;<br>    shared_ptr<node> left,right;<br>    Node() : value(INT_MIN), left(NULL), right(NULL){}<br>};</node></p>
<p>用了shared_ptr就记住不要有*，这是cpp最带刺的地方。</p>
<p>顺便附上一个 算法黑书输入颗二叉树，输出层序遍历的代码。如果构造出错的，例如内部点没赋值，或者一个点出现多次，都输出-10</p>
<p>input:<br>(3,L) (4,R) (2,) ()<br>(11,LL) (7,LLL) (8,R) (5,) (4,L) (13,RL) (2,LLR) (1,RRR) (4,RR) ()</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;cstring&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;string&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;queue&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;memory&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;climits&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">struct</span> Node
{
    <span class="keyword">int</span> value;
    <span class="built_in">shared_ptr</span>&lt;Node&gt; left,right;
    Node() : value(INT_MIN), left(NULL), right(NULL){}
};
<span class="built_in">shared_ptr</span>&lt;Node&gt; root;
<span class="keyword">int</span> stoi(<span class="built_in">string</span> x)
{
    <span class="keyword">int</span> sum=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">auto</span> e: x)
        sum=sum*<span class="number">10</span>+e-<span class="string">'0'</span>;
    <span class="keyword">return</span> sum;
}
<span class="keyword">bool</span> invalid;
<span class="keyword">void</span> addNode(<span class="built_in">string</span> s,<span class="keyword">int</span> v)
{
    <span class="keyword">int</span> len = s.length();
    <span class="built_in">shared_ptr</span>&lt;Node&gt; r = root;
    <span class="keyword">for</span>(<span class="keyword">auto</span> e:s)
    {
        <span class="keyword">if</span>(e == <span class="string">'L'</span>){
            <span class="keyword">if</span>(r-&gt;left == NULL) r-&gt;left=make_shared&lt;Node&gt;();
            r = r-&gt;left;
        }
        <span class="keyword">else</span> <span class="keyword">if</span>(e == <span class="string">'R'</span>){
            <span class="keyword">if</span>(r-&gt;right == NULL) r-&gt;right=make_shared&lt;Node&gt;();
            r = r-&gt;right;
        }
    }
    <span class="keyword">if</span>(r-&gt;value==INT_MIN)
        r-&gt;value = v;
    <span class="keyword">else</span> invalid=<span class="number">1</span>;
}

<span class="keyword">int</span> main()
{
    invalid = <span class="number">0</span>;
    <span class="built_in">string</span> str;
    root = make_shared&lt;Node&gt;();
    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;str)
    {
        <span class="keyword">int</span> len = str.size();
        str = str.substr(<span class="number">1</span>,len-<span class="number">2</span>);
        <span class="keyword">int</span> pos = str.find(<span class="string">","</span>);
        <span class="keyword">if</span> (pos == -<span class="number">1</span>) <span class="keyword">break</span>;
        <span class="keyword">int</span> val = stoi(str.substr(<span class="number">0</span>,pos));
        <span class="built_in">string</span> dir = str.substr(pos+<span class="number">1</span>, str.size()-pos-<span class="number">1</span>);
        addNode(dir,val);
    }
    <span class="stl_container"><span class="built_in">queue</span>&lt;<span class="built_in">shared_ptr</span>&lt;Node&gt;</span>&gt; q;
    <span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> ans;
    q.push(root);
    <span class="keyword">while</span>(!q.empty())
    {
        <span class="keyword">auto</span> cur=q.front();q.pop();
        <span class="keyword">if</span>(cur-&gt;value!=INT_MIN) ans.push_back(cur-&gt;value);
        <span class="keyword">else</span>
        {
            invalid=<span class="number">1</span>;
            <span class="keyword">break</span>;
        }
        <span class="keyword">if</span>(cur-&gt;left) q.push(cur-&gt;left);
        <span class="keyword">if</span>(cur-&gt;right) q.push(cur-&gt;right);
    }
    <span class="keyword">if</span>(invalid) <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1"</span>&lt;&lt;endl;
    <span class="keyword">else</span>
    {
        <span class="keyword">for</span>(<span class="keyword">auto</span> e: ans) <span class="built_in">cout</span>&lt;&lt; e &lt;&lt; <span class="string">" "</span>;
        <span class="built_in">cout</span> &lt;&lt; endl;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 13 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/10/Ball-Down/">Ball Down</a></h1>
  

      <time datetime="2015-03-10T09:01:48.000Z"><a href="/2015/03/10/Ball-Down/">3月 10 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>算法黑书上一道题目，题意是深度为D的满二叉树，内部节点有开关，初始关，每个小球从root开始下降，如果关向左，否则向右，同时开关切换状态</p>
<p>我找了一下规律，发现二进制表示比较明显，<br>0000<br>1000<br>0100<br>1100<br>0010<br>1010<br>0110<br>1110</p>
<p>第一位是0101出现，第二位是0011出现，第三位是00001111出现，如此下去，因此有如下代码：</p>
<pre><code><span class="keyword">while</span>(cin&gt;&gt;D&gt;&gt;I)
{
    I--;
    <span class="keyword">int</span> bit, <span class="keyword">sum</span>=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=D-<span class="number">1</span>;k++)
        bit=I%(<span class="number">1</span>&lt;&lt;k)/(<span class="number">1</span>&lt;&lt;(k-<span class="number">1</span>)), <span class="keyword">sum</span>=<span class="keyword">sum</span>*<span class="number">2</span>+bit;
    <span class="keyword">sum</span>+=(<span class="number">1</span>&lt;&lt;(D-<span class="number">1</span>));
    cout&lt;&lt;<span class="keyword">sum</span>&lt;&lt;endl;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 10 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/09/GCD-application/">GCD application</a></h1>
  

      <time datetime="2015-03-09T03:46:49.000Z"><a href="/2015/03/09/GCD-application/">3月 9 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这道题目 如果是 搜索做，主要一个限制条件判断就是A1*…Ak是否是M整数倍，这里看到某大神代码用了这样<br>一个递推关系来判定，解决了大整数 溢出的问题</p>
<p>P(i)=(j=i-&gt;n) GCD(P(i-1)<em>j, m), 最后判P[k]==m   等价于 A1</em>…Ak是否是M的倍数。<br>具体的证明都是马后炮了，在限时的比赛里几乎没用，重要的是会有一种称为数感的东西，大致是这样，然后<br>模拟点数据验证一下。</p>
<p>试着推导了一下，P(i)=gcd(P(i-1)<em>Ai, m)=….=gcd(A1,m)</em>….gcd(Ak,m)<br>而gcd(A1,m)<em>….gcd(Ak,m)&lt;====&gt;A1</em>…Ak%m==0</p>
<p>gcd有如下性质<br>gcd(a, b)&lt;=min(a, b)<br>gcd(a<em>b, c)=gcd(a, c)</em>gcd(b, c)</p>
<p>具体代码如下，自己不知道这个方法的时候，做了质因数分解，然后hash存，每次还要hash减，dfs调用后还要复原，又称为回溯<br>这题有个DP做法更优，但是先实现这个再说</p>
<pre><code><span class="keyword">int</span> n,m;
<span class="keyword">int</span> solve(<span class="keyword">int</span> now_pos,<span class="keyword">int</span> lft,<span class="keyword">int</span> lcm){
    <span class="keyword">if</span>(lft == <span class="number">0</span>){
        <span class="keyword">if</span>(lcm == m)<span class="keyword">return</span> <span class="number">1</span>;
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    <span class="keyword">int</span> cnt=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=now_pos;i&lt;=lft;i++){
        cnt+=solve(i+<span class="number">1</span>,lft-i,__gcd(lcm*i,m));
    }
    <span class="keyword">return</span> cnt;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 9 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/08/erase-element-during-traversal/">erase element during traversal</a></h1>
  

      <time datetime="2015-03-08T08:40:29.000Z"><a href="/2015/03/08/erase-element-during-traversal/">3月 8 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>今天遇到一个问题就是遍历一个容器的时候删除应该怎么做。<br>这个其实是经常遇到的问题，但是没有总结。</p>
<p>如果C++11的话，非常方便，如下是C++ Primer推荐的方式(reference by 战神 and 炮哥)</p>
<pre><code><span class="keyword">for</span>(map&lt;int, int&gt;::iterator <span class="keyword">it</span>=hash1.begin();<span class="keyword">it</span>!=hash1.<span class="keyword">end</span>();)
{
    <span class="keyword">if</span>(j%(<span class="keyword">it</span>-&gt;f)==<span class="number">0</span> &amp;&amp; (<span class="keyword">it</span>-&gt;s)&gt;=<span class="number">1</span>)
    {
        <span class="keyword">it</span>-&gt;s<span class="comment">--;</span>
        <span class="keyword">if</span>(<span class="keyword">it</span>-&gt;s==<span class="number">0</span>)
        {
            <span class="keyword">it</span>=hash1.erase(<span class="keyword">it</span>);
            <span class="keyword">continue</span>;
        }
    }
    <span class="keyword">it</span>++;
}
</code></pre><p>因为删除后，当前迭代器失效了，然后返回下一个元素的迭代器，这样遍历正常运行，否则按照正常it++就好了 ，由于这个分治是两个if，因此代码用continue可能更方便些。</p>
<p>如果C++98的话，这种方式似乎是可以的，从博客 <a href="http://www.cnblogs.com/zhoulipeng/p/3432009.html" target="_blank" rel="external">http://www.cnblogs.com/zhoulipeng/p/3432009.html</a></p>
<pre><code><span class="keyword">for</span>(map&lt;int, int&gt;::iterator <span class="keyword">it</span>=hash1.begin();<span class="keyword">it</span>!=hash1.<span class="keyword">end</span>();)
{
    <span class="keyword">if</span>(j%(<span class="keyword">it</span>-&gt;f)==<span class="number">0</span> &amp;&amp; (<span class="keyword">it</span>-&gt;s)&gt;=<span class="number">1</span>)
    {
        <span class="keyword">it</span>-&gt;s<span class="comment">--;</span>
        <span class="keyword">if</span>(<span class="keyword">it</span>-&gt;s==<span class="number">0</span>)
        {
            hash1.erase(<span class="keyword">it</span>++);
            <span class="keyword">continue</span>;
        }
    }
    <span class="keyword">it</span>++;
}
</code></pre><p>主要是由于hihocode 不支持C++11，因此只能用C++98 的STL API，<a href="http://www.cplusplus.com/reference/map/map/erase/" target="_blank" rel="external">http://www.cplusplus.com/reference/map/map/erase/</a></p>
<p>另外还有一点就是关于continue的小细节<br>    for(map<int, int="">::iterator it=hash1.begin();it!=hash1.end();)<br>    {<br>        if(j%(it-&gt;f)==0 &amp;&amp; (it-&gt;s)&gt;=1)<br>        {<br>            it-&gt;s—;<br>            if(it-&gt;s==0)<br>            {<br>                it=hash1.erase(it);<br>                continue;<br>            }<br>        }<br>        it++;<br>    }<br>如果it++放到for(;;)后面，那么continue的话，it++还是会执行的，所以要特别小心。</int,></p>
<pre><code><span class="keyword">for</span>(<span class="number">1</span>;<span class="number">2</span>;<span class="number">3</span>){
  <span class="number">4</span>
}
</code></pre><p>分组循环：[1,2] [4,3,2] [4,3,2]….<br>continue之后 由4跳到3。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 8 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/07/CF269Div2ProC/">CF269Div2ProC</a></h1>
  

      <time datetime="2015-03-07T08:00:29.000Z"><a href="/2015/03/07/CF269Div2ProC/">3月 7 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这道题目乍一看以为是很复杂的搜索，搜索各种情况，就没有细想。其实只要找规律加枚举就好了，夫神比赛时间做出来，膜拜夫神。</p>
<p><a href="http://codeforces.com/contest/471/problem/C" target="_blank" rel="external">http://codeforces.com/contest/471/problem/C</a></p>
<p>找到规律就好办了，每一层至少一个2，表示最左侧，然后右侧没加一个要加3，没保持上层比下层小，所以至少是0+1+…h-1个room, 每个room用3，<br>剩下的只要堆在最底层就可以，满足3的倍数，于是算法成型</p>
<pre><code>LL Room(LL n)
{
    LL ans=<span class="number">0</span>;
    <span class="keyword">for</span>(LL i=<span class="number">0</span>;;i++)
    {
        LL num=i*(i+<span class="number">1</span>)/<span class="number">2</span>;
        LL remain=n-(i+<span class="number">1</span>)*<span class="number">2</span>-num*<span class="number">3</span>;
        <span class="keyword">if</span>(remain&lt;<span class="number">0</span>) <span class="keyword">break</span>;
        <span class="keyword">if</span>(remain<span class="variable">%3</span>==<span class="number">0</span>) ans++;
    }
    <span class="keyword">return</span> ans;
}

时间复杂度是n=(i+<span class="number">1</span>)/<span class="number">2</span>+<span class="number">3</span>/<span class="number">2</span>*i*(i+<span class="number">1</span>) 中i的结果

i=(<span class="keyword">sqrt</span>(<span class="number">4</span>+<span class="number">24</span>n)-<span class="number">4</span>)/<span class="number">6</span>=O(<span class="keyword">sqrt</span>(n))

时间复杂度是O(<span class="keyword">sqrt</span>(n))
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 7 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/05/LIS-application/">LIS application</a></h1>
  

      <time datetime="2015-03-04T17:48:10.000Z"><a href="/2015/03/05/LIS-application/">3月 5 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p><a href="http://codeforces.com/contest/4/problem/D" target="_blank" rel="external">http://codeforces.com/contest/4/problem/D</a></p>
<p>这道题目是一道LIS，后来也想到了，但是想dp[i]是以为尾元素为序列的最大值，从输入数据开始dp即使找到了最大值他的起点也未必是&gt;w &gt;h的，<br>然后觉得有点麻烦了，后来发现可以先把&lt;=的都删掉，过滤一遍，这样剩下的任意一个值都是符合头的性质的，也就是严格的从头开始的递增序列。</p>
<p>但是WA了一次，发现dp之后构造解，忘记加递增的条件了(!j || (data[j-1].w&lt;data[i-1].w &amp;&amp; data[j-1].h&lt;data[i-1].h))， 还漏了一次!j的判断，<br>这里其实因为只要返回任意解，直接for就可以解决了，如果是返回所有解，由于有多个分支，因此需要dfs每个分支了。</p>
<pre><code><span class="keyword">struct</span> Node
{
    <span class="keyword">int</span> w, h;
    <span class="keyword">int</span> in;
    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(Node n) <span class="keyword">const</span>
    {
        <span class="keyword">if</span>(w!=n.w) <span class="keyword">return</span> w&lt;n.w;
        <span class="keyword">else</span> <span class="keyword">return</span> h&lt;n.h;
    }
};
<span class="keyword">int</span> main()
{
<span class="comment">/*
#ifndef ONLINE_JUDGE
    freopen ("in.txt" , "r" , stdin);
    freopen ("out.txt" , "w" , stdout);
#endif
*/</span>
    <span class="keyword">int</span> n, w, h, w1, h1;
    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w&gt;&gt;h;
    <span class="keyword">int</span> dp[n+<span class="number">1</span>];
    <span class="stl_container"><span class="built_in">vector</span>&lt;Node&gt;</span> data;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)
    {
        <span class="built_in">cin</span>&gt;&gt;w1&gt;&gt;h1;
        <span class="keyword">if</span>(w1&gt;w &amp;&amp; h1&gt;h)
            data.push_back({w1,h1,i+<span class="number">1</span>});
    }
    sort(data.begin(), data.end());
    n=data.size();
    dp[<span class="number">0</span>]=<span class="number">0</span>;
    <span class="keyword">int</span> maxi=<span class="number">0</span>, maxdp=dp[<span class="number">0</span>];
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
    {
        dp[i]=<span class="number">0</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)
        {
            <span class="keyword">if</span>(!j || (data[j-<span class="number">1</span>].w&lt;data[i-<span class="number">1</span>].w &amp;&amp; data[j-<span class="number">1</span>].h&lt;data[i-<span class="number">1</span>].h))
                dp[i]=max(dp[i], dp[j]+<span class="number">1</span>);
        }
        <span class="keyword">if</span>(dp[i]&gt;maxdp) maxdp=dp[i], maxi=i;
    }
    <span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> ans;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=maxi;i&gt;<span class="number">0</span>;)
    {
        ans.push_back(data[i-<span class="number">1</span>].in);
        <span class="keyword">int</span> j;
        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;i;j++)
        {
            <span class="keyword">if</span>(dp[i]==dp[j]+<span class="number">1</span> &amp;&amp; (!j || (data[j-<span class="number">1</span>].w&lt;data[i-<span class="number">1</span>].w &amp;&amp; data[j-<span class="number">1</span>].h&lt;data[i-<span class="number">1</span>].h)))
                <span class="keyword">break</span>;
        }
        i=j;
    }
    reverse(ans.begin(), ans.end());
    <span class="built_in">cout</span>&lt;&lt;ans.size()&lt;&lt;endl;
    <span class="keyword">for</span>(<span class="keyword">auto</span> e: ans) <span class="built_in">cout</span>&lt;&lt;e&lt;&lt;<span class="string">" "</span>;
    <span class="built_in">cout</span>&lt;&lt;endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 5 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/05/DFS-color-count/">DFS color count</a></h1>
  

      <time datetime="2015-03-04T16:40:59.000Z"><a href="/2015/03/05/DFS-color-count/">3月 5 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>DFS题，但是犯了很多错误，<a href="http://codeforces.com/contest/505/problem/B" target="_blank" rel="external">http://codeforces.com/contest/505/problem/B</a><br>里面的图是多重边，每条边有color，保证两个点之间的边不会重色，也就是加一重循环，但是犯了很多错误，一直WA</p>
<ol>
<li><p>对于输入点构建图忘记加上对立边了，例如mat[a][b]=c, mat[b][a]=c, 之前也翻过类似错误</p>
</li>
<li><p>对于dfs还是不熟练，炒肉大神建议局部变量传递，返回值设计，参数设计。关键是找到递归结构，结果找递归结构的时候已经看错题了。<br>看成路径的个数，而不是color的种类数。int dfs,  dfs(s,e)=sum(i:1-&gt;n &amp;&amp; <s, i="">) dfs(i,e), 这样之后就好写流程.</s,></p>
</li>
</ol>
<p>3.DFS框架是先判是否递归出口，也即找到目的点，如果不到终点，则判断是否已经访问过，当然也可以放在for循环里，但是这样结构清楚，<br>除非是必须比较当前与下一层的一个属性，然后又不加参数这样。这两个出口有时候可以互换，有时又不行，例如之前lc的一道word search，<br>自己第一遍写的时候老是死循环，后来G神帮我调代码就发现了问题，先判是否word到头了，再判是否访问过了。</p>
<ol>
<li><p>由于需要判断当前颜色是否始终一致，如果从起点调用一次dfs，那么第一层的时候颜色是不需要判断的，因此还要设置变量来判断，这样很麻烦，<br>于是for循环调用dfs，但是忘记设置v[s]=1</p>
</li>
<li><p>visit 数组初始化位置不正确，放在每一个query开始</p>
</li>
<li><p>如果是需要遍历整个图的，需要再出口之后v[cur]=1, 同时最后return之前v[cur]=0, 这是中间没有return的情况，如果有的话，必须先v[cur]=0 复原，<br>然后return ，否则有些状态变了返回到上一层的时候不能复原导致出错。</p>
</li>
<li><p>用一个color数组来存是否 计算过且有路径，有的话置为1, 本质和hash一样。</p>
</li>
</ol>
<p>代码如下：</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span>&lt;set&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;map&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;list&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cmath&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;queue&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;stack&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;ctime&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;string&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;vector&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;climits&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstdlib&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstring&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;fstream&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;iostream&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;algorithm&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;unordered_set&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;unordered_map&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;
<span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e2</span> + <span class="number">10</span>;
<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;
<span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;
<span class="comment">//int, -2^31~2^31-1    -2.1*10^9~2.1*10^9 (-2147483648-2147483647)</span>
<span class="comment">//unsigned int, 0~2^32-1  0~4.2*10^9</span>
<span class="comment">//long long  -2^63~2^63-1 -9*10^18~9*10^18</span>
<span class="comment">//unsigned long long 0~2^64-1  0~1.8*10^19</span>
<span class="keyword">bool</span> v[maxn];
<span class="keyword">bool</span> validcolor[maxn];
<span class="keyword">int</span> n;
<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> mat[maxn][maxn];
<span class="keyword">int</span> dfs(<span class="keyword">int</span> cur, <span class="keyword">int</span> e, <span class="keyword">int</span> color)
{
    <span class="keyword">if</span>(cur==e) <span class="keyword">return</span> <span class="number">1</span>;
    <span class="keyword">if</span>(v[cur]) <span class="keyword">return</span> <span class="number">0</span>;
    v[cur]=<span class="number">1</span>;
    <span class="keyword">int</span> sum=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
    {
        <span class="keyword">if</span>(i==cur) <span class="keyword">continue</span>;
        <span class="keyword">for</span>(<span class="keyword">auto</span> ele: mat[cur][i])
            <span class="keyword">if</span>(ele==color &amp;&amp; dfs(i, e, color)) {v[cur]=<span class="number">0</span>; <span class="keyword">return</span> <span class="number">1</span>;}
    }
    v[cur]=<span class="number">0</span>;
    <span class="keyword">return</span> <span class="number">0</span>;
}
<span class="keyword">int</span> main()
{
<span class="comment">/*
#ifndef ONLINE_JUDGE
    freopen ("in.txt" , "r" , stdin);
    freopen ("out.txt" , "w" , stdout);
#endif
*/</span>
    <span class="keyword">int</span>  m, q, qu, qv, x,y, c;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;maxn;j++) mat[i][j].clear();
    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) <span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;c, mat[x][y].push_back(c), mat[y][x].push_back(c);
    <span class="built_in">cin</span>&gt;&gt;q;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q;i++)
    {
        <span class="built_in">cin</span>&gt;&gt;qu&gt;&gt;qv;
        <span class="built_in">memset</span>(validcolor, <span class="number">0</span>, <span class="keyword">sizeof</span> validcolor);
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
        {
            <span class="built_in">memset</span>(v, <span class="number">0</span> ,<span class="keyword">sizeof</span> v);
            <span class="keyword">if</span>(i==qu) <span class="keyword">continue</span>;
            v[qu]=<span class="number">1</span>;
            <span class="keyword">for</span>(<span class="keyword">auto</span> ele: mat[qu][i])
                <span class="keyword">if</span>(!validcolor[ele] &amp;&amp; dfs(i, qv, ele)) validcolor[ele]=<span class="number">1</span>;;
        }
        <span class="keyword">int</span> sum=<span class="number">0</span>;<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) sum+=validcolor[j];
        <span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;endl;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 5 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/04/Valgrind-Massif-profiler/">Valgrind Massif profiler</a></h1>
  

      <time datetime="2015-03-04T08:11:57.000Z"><a href="/2015/03/04/Valgrind-Massif-profiler/">3月 4 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>看到一篇文章用这个工具来查看内存，linux下安装，26设置了代理，/etc/apt/apt/conf.d/apt.conf文件里，设置了实验室代理，<br>但是注释掉似乎还是用不了163的源，安装这个工具，遂放弃。</p>
<ol>
<li>可能源当前坏了</li>
<li>可能代理设置不止修改这个文件生效，因为看到网上是 /etc/apt/apt/apt.conf 这样一个路径</li>
<li>不知道了。</li>
</ol>
<p>这个工具说看heap空间，但实际上也可以设置参数看stack空间占用</p>
<p><a href="http://valgrind.org/docs/manual/ms-manual.html" target="_blank" rel="external">http://valgrind.org/docs/manual/ms-manual.html</a></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 4 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/03/push-specific-file-types/">push specific file types</a></h1>
  

      <time datetime="2015-03-03T10:27:15.000Z"><a href="/2015/03/03/push-specific-file-types/">3月 3 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这个问题很常见，因为一个目录下很多文件不是代码，尤其是做Programming Contest，输入输出之类的，因此需要上传指定文件。</p>
<pre><code><span class="title">git</span> add <span class="regexp">*.cpp</span>
</code></pre><p>这个是比较简单的做法，采用wildcard matching, 做了lc之后，就对正则有了新的认识。但是这个有几个缺点</p>
<ol>
<li>可能不能递归到子目录</li>
<li>对于每个文件类型都要敲命令，例如有.h, .cpp等</li>
</ol>
<p>最好的做法是 <a href="http://stackoverflow.com/questions/1139762/ignore-files-that-have-already-been-committed-to-a-git-repository" target="_blank" rel="external">http://stackoverflow.com/questions/1139762/ignore-files-that-have-already-been-committed-to-a-git-repository</a><br>配置.gitignore文件，</p>
<pre><code><span class="keyword">*</span>
!<span class="keyword">*</span>/
!<span class="keyword">*</span>.c
!<span class="keyword">*</span>.h
!<span class="keyword">*</span>.cpp
!<span class="keyword">*</span>.java
</code></pre><p>其中!*表示子文件夹一样处理</p>
<p>这样可以解决上面两个问题</p>
<p>对于已经存在的repository，可以先删除，然后再重新push, 用以下命令组合</p>
<p>如果没有.gitignore文件，先touch .gitignore</p>
<pre><code>git rm -r <span class="comment">--cached .</span>

git add .

git <span class="operator"><span class="keyword">commit</span> -m <span class="string">".gitignore is now working"</span>

git push -u origin <span class="keyword">master</span></span>
</code></pre><p>…or create a new repository on the command line</p>
<pre><code><span class="input"><span class="prompt">echo # MasterThesis &gt;&gt;</span> <span class="constant">README</span>.md</span>
git init
git add <span class="constant">README</span>.md
git commit -m <span class="string">"first commit"</span>
git remote add origin git<span class="variable">@github</span>.<span class="symbol">com:</span>zhangruichang/<span class="constant">MasterThesis</span>.git
git push -u origin master
</code></pre><p>…or push an existing repository from the command line</p>
<pre><code>git remote <span class="keyword">add</span> origin git@github.com:zhangruichang/MasterThesis.git
git <span class="keyword">push</span> -u origin master
</code></pre><p>…or import code from another repository</p>
<p>You can initialize this repository with code from a Subversion, Mercurial, or TFS project.</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 3 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/21/Combination-DP/">Combination DP</a></h1>
  

      <time datetime="2015-02-21T11:48:59.000Z"><a href="/2015/02/21/Combination-DP/">2月 21 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这道题目是APAC2015 RoundB 的ProblemA <a href="https://code.google.com/codejam/contest/4214486/dashboard，" target="_blank" rel="external">https://code.google.com/codejam/contest/4214486/dashboard，</a><br>也是NEU ACM的一道月赛题  <a href="http://acm.neu.edu.cn/hustoj/problem.php?id=1447" target="_blank" rel="external">http://acm.neu.edu.cn/hustoj/problem.php?id=1447</a></p>
<p>并且从这里学习了一下Stirling数，之前其实看过，是离散数学课跳过的内容，还有Catalan数，这两个组合数都是非常重要的，Catalan数<br>1/(n+1) C(2n, n) 是n对括号合法序列数，BOP上买票问题，二叉树个数等等重要的计数问题答案，Striling数相对运用不是特别广泛，<br>例如第一类是指一个n阶permutation可以由k个轮换乘积表示的个数，第二类是n个数划分为k个非空集合的划分方法，<br>二者都是通过递推公式来算的，当然也可以直接有对应的通项公式，但是非常复杂。</p>
<p>一开始看一篇博客，说的第一类Striling数，然后底下一哥们评论说是APAC这题，现在清楚了，他说错了，其实不是的，但是也是类似的递推公式。<br>DP其实就是递推，找出递推式，对于二维状态来说，多半是dp(i,j) 与dp(i-1, j), dp(i, j-1), dp(i-1, j-1) 发生纠葛，然后至于选哪几个，系数是多少<br>就是数学的brainstorm了，可以先看看子问题dp(i,j) 表示前j个位置放置i种数字的计数，前j-1个位置放置i种和i-1种， 如果放置了i种的话，最后一个任意放<br>i种的一种，i<em>dp(i,j-1), 如果是放置了i-1种数字，那么最后一个位置只能放置剩下的一种，但是前面i-1是i种里面的哪i-1种，C(i,i-1)=i, 所以i</em>dp(i-1,j-1)<br>因此得到dp(i,j)=i<em>(dp(i-1,j)+dp(i-1,j-1)),i&lt;j, i=1…m, j=1…n, m&lt;=n, 需要设置base，dp(1,j)=1, dp(i,i)=i!,<br>注意对于这种溢出的情况，MOD一个大数，这个数是1e9+7,int范围内，但是(1e9+7)</em>100可能是超过int 范围的，因此用long long(10^18),递推式也不会超过LL范围，<br>因此代码如下：</p>
<pre><code>LL dp[maxn][maxn];
<span class="keyword">const</span> LL MOD=<span class="number">1e9</span>+<span class="number">7</span>;
<span class="keyword">int</span> main()
{

<span class="preprocessor">#ifndef ONLINE_JUDGE</span>
    freopen (<span class="string">"A-large-practice.in"</span> , <span class="string">"r"</span> , stdin);
    freopen (<span class="string">"A-large-practice.out"</span> , <span class="string">"w"</span> , stdout);
<span class="preprocessor">#<span class="keyword">endif</span></span>

    LL t;
    <span class="built_in">cin</span>&gt;&gt;t;
    <span class="keyword">for</span>(LL ti=<span class="number">1</span>;ti&lt;=t;ti++)
    {
        LL m, n;
        <span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n;<span class="comment">//m&lt;=n</span>
        <span class="keyword">for</span>(LL j=<span class="number">1</span>;j&lt;=n;j++) dp[<span class="number">1</span>][j]=<span class="number">1l</span>l;
        <span class="keyword">for</span>(LL i=<span class="number">2</span>;i&lt;=m;i++) dp[i][i]=(dp[i-<span class="number">1</span>][i-<span class="number">1</span>]*i)%MOD;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=m;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)
            dp[i][j]=(i*(dp[i][j-<span class="number">1</span>]+dp[i-<span class="number">1</span>][j-<span class="number">1</span>]))%MOD;
        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,ti);
        <span class="built_in">cout</span>&lt;&lt;dp[m][n]&lt;&lt;endl;
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}  
</code></pre><p>代码如下，感觉这道是四次APAC ProblemA里最难的，其他的两道编程题，一道DFS，都比较make sense</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 21 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">下一页</a>
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://admis.fudan.edu.cn/~rczhang">About Me</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://blog.csdn.net/richardzrc">Csdn Blog</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://richard_zhang.drivehq.com/">Previous Page</a></div>
    
</div>


  </div>
</body>
</html>