<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 4 页 | Richard</title>
  <meta name="author" content="Richard">
  
  <meta name="description" content="理查德爱闹">
  
  
  
  <meta property="og:site_name" content="Richard"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://xxx.xx/atom.xml" title="Richard" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">Richard</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="http://admis.fudan.edu.cn/~rczhang">About Me</a><li>
    
      <li class="cell"><a class="next" href="http://blog.csdn.net/richardzrc">Csdn Blog</a><li>
    
      <li class="cell"><a class="next" href="http://richard_zhang.drivehq.com/">Previous Page</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
  <iframe width="100%" height="750" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=750&fansRow=2&ptype=1&speed=0&skin=6&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2689136623&verifier=c139aa37&dpc=1"></iframe>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/AVL/">AVL</a><small>1</small></li>
  
    <li><a href="/categories/BT/">BT</a><small>1</small></li>
  
    <li><a href="/categories/Binary-Tree/">Binary Tree</a><small>1</small></li>
  
    <li><a href="/categories/BinaryTree/">BinaryTree</a><small>1</small></li>
  
    <li><a href="/categories/C/">C</a><small>3</small></li>
  
    <li><a href="/categories/C++/">C++</a><small>1</small></li>
  
    <li><a href="/categories/CF-and-BC/">CF and BC</a><small>1</small></li>
  
    <li><a href="/categories/CodeBlocks/">CodeBlocks</a><small>1</small></li>
  
    <li><a href="/categories/DFA/">DFA</a><small>1</small></li>
  
    <li><a href="/categories/DFS/">DFS</a><small>1</small></li>
  
    <li><a href="/categories/DP/">DP</a><small>3</small></li>
  
    <li><a href="/categories/GCD/">GCD</a><small>1</small></li>
  
    <li><a href="/categories/Greedy/">Greedy</a><small>1</small></li>
  
    <li><a href="/categories/Left-and-Right-Array/">Left and Right Array</a><small>1</small></li>
  
    <li><a href="/categories/Linklist/">Linklist</a><small>1</small></li>
  
    <li><a href="/categories/Mac-and-Windows/">Mac and Windows</a><small>1</small></li>
  
    <li><a href="/categories/Machine-Learning/">Machine Learning</a><small>1</small></li>
  
    <li><a href="/categories/Recursive/">Recursive</a><small>1</small></li>
  
    <li><a href="/categories/SKIWC/">SKIWC</a><small>1</small></li>
  
    <li><a href="/categories/STL/">STL</a><small>1</small></li>
  
    <li><a href="/categories/Trie/">Trie</a><small>1</small></li>
  
    <li><a href="/categories/Union-find-set/">Union-find set</a><small>1</small></li>
  
    <li><a href="/categories/add-num/">add num</a><small>1</small></li>
  
    <li><a href="/categories/algorithm/">algorithm</a><small>15</small></li>
  
    <li><a href="/categories/app/">app</a><small>1</small></li>
  
    <li><a href="/categories/backtrack/">backtrack</a><small>2</small></li>
  
    <li><a href="/categories/bag/">bag</a><small>1</small></li>
  
    <li><a href="/categories/bfs/">bfs</a><small>1</small></li>
  
    <li><a href="/categories/bfs,-dfs/">bfs, dfs</a><small>1</small></li>
  
    <li><a href="/categories/binary-search/">binary search</a><small>2</small></li>
  
    <li><a href="/categories/binary-tree/">binary tree</a><small>5</small></li>
  
    <li><a href="/categories/bit/">bit</a><small>1</small></li>
  
    <li><a href="/categories/bit-operation/">bit operation</a><small>2</small></li>
  
    <li><a href="/categories/blog/">blog</a><small>1</small></li>
  
    <li><a href="/categories/c-language/">c language</a><small>2</small></li>
  
    <li><a href="/categories/catalan/">catalan</a><small>1</small></li>
  
    <li><a href="/categories/coding/">coding</a><small>2</small></li>
  
    <li><a href="/categories/complex-condition-anaysis/">complex condition anaysis</a><small>1</small></li>
  
    <li><a href="/categories/cpp/">cpp</a><small>14</small></li>
  
    <li><a href="/categories/cpp-string/">cpp string</a><small>1</small></li>
  
    <li><a href="/categories/data-structure/">data structure</a><small>4</small></li>
  
    <li><a href="/categories/database/">database</a><small>1</small></li>
  
    <li><a href="/categories/dfs/">dfs</a><small>2</small></li>
  
    <li><a href="/categories/dfs,-non-recursive/">dfs, non-recursive</a><small>1</small></li>
  
    <li><a href="/categories/digit/">digit</a><small>1</small></li>
  
    <li><a href="/categories/dp/">dp</a><small>9</small></li>
  
    <li><a href="/categories/ds/">ds</a><small>2</small></li>
  
    <li><a href="/categories/easy-programming/">easy programming</a><small>1</small></li>
  
    <li><a href="/categories/experience/">experience</a><small>1</small></li>
  
    <li><a href="/categories/gechao-principle/">gechao principle</a><small>1</small></li>
  
    <li><a href="/categories/git/">git</a><small>1</small></li>
  
    <li><a href="/categories/greedy-problem/">greedy problem</a><small>1</small></li>
  
    <li><a href="/categories/hadoop/">hadoop</a><small>1</small></li>
  
    <li><a href="/categories/hash/">hash</a><small>1</small></li>
  
    <li><a href="/categories/heap/">heap</a><small>2</small></li>
  
    <li><a href="/categories/hexo-configuration/">hexo configuration</a><small>1</small></li>
  
    <li><a href="/categories/hihocode/">hihocode</a><small>1</small></li>
  
    <li><a href="/categories/inequality/">inequality</a><small>1</small></li>
  
    <li><a href="/categories/install-os/">install os</a><small>1</small></li>
  
    <li><a href="/categories/integer/">integer</a><small>1</small></li>
  
    <li><a href="/categories/java-compare-two-object/">java compare two object</a><small>1</small></li>
  
    <li><a href="/categories/k-mer/">k-mer</a><small>1</small></li>
  
    <li><a href="/categories/kmp/">kmp</a><small>1</small></li>
  
    <li><a href="/categories/latex/">latex</a><small>1</small></li>
  
    <li><a href="/categories/linklist/">linklist</a><small>9</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/loading-force/">loading force</a><small>1</small></li>
  
    <li><a href="/categories/logic/">logic</a><small>1</small></li>
  
    <li><a href="/categories/math/">math</a><small>3</small></li>
  
    <li><a href="/categories/math-rule/">math rule</a><small>1</small></li>
  
    <li><a href="/categories/matlab-programming/">matlab programming</a><small>1</small></li>
  
    <li><a href="/categories/mod/">mod</a><small>1</small></li>
  
    <li><a href="/categories/novel/">novel</a><small>1</small></li>
  
    <li><a href="/categories/number-theory/">number theory</a><small>1</small></li>
  
    <li><a href="/categories/permutation/">permutation</a><small>2</small></li>
  
    <li><a href="/categories/probability/">probability</a><small>2</small></li>
  
    <li><a href="/categories/programming/">programming</a><small>1</small></li>
  
    <li><a href="/categories/quick-and-right-coding/">quick and right coding</a><small>1</small></li>
  
    <li><a href="/categories/scanf/">scanf</a><small>1</small></li>
  
    <li><a href="/categories/screen/">screen</a><small>1</small></li>
  
    <li><a href="/categories/screen-alg/">screen alg</a><small>1</small></li>
  
    <li><a href="/categories/sequence/">sequence</a><small>1</small></li>
  
    <li><a href="/categories/sort/">sort</a><small>1</small></li>
  
    <li><a href="/categories/sorting/">sorting</a><small>1</small></li>
  
    <li><a href="/categories/string/">string</a><small>1</small></li>
  
    <li><a href="/categories/swap/">swap</a><small>1</small></li>
  
    <li><a href="/categories/time-complexity/">time complexity</a><small>1</small></li>
  
    <li><a href="/categories/vote/">vote</a><small>1</small></li>
  
    <li><a href="/categories/web/">web</a><small>2</small></li>
  
    <li><a href="/categories/数字规律/">数字规律</a><small>1</small></li>
  
    <li><a href="/categories/树形DP/">树形DP</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/BFS/" style="font-size: 10.00px;">BFS</a><a href="/tags/BST/" style="font-size: 12.50px;">BST</a><a href="/tags/BT/" style="font-size: 15.00px;">BT</a><a href="/tags/Backtrack/" style="font-size: 10.00px;">Backtrack</a><a href="/tags/Bayesian-graph-model/" style="font-size: 10.00px;">Bayesian graph model</a><a href="/tags/C/" style="font-size: 17.50px;">C</a><a href="/tags/C++/" style="font-size: 10.00px;">C++</a><a href="/tags/CF-and-BC/" style="font-size: 10.00px;">CF and BC</a><a href="/tags/CodeBlocks/" style="font-size: 10.00px;">CodeBlocks</a><a href="/tags/Combinations/" style="font-size: 10.00px;">Combinations</a><a href="/tags/DFA/" style="font-size: 10.00px;">DFA</a><a href="/tags/DP/" style="font-size: 17.50px;">DP</a><a href="/tags/GCD/" style="font-size: 10.00px;">GCD</a><a href="/tags/Greedy/" style="font-size: 10.00px;">Greedy</a><a href="/tags/Left-and-Right-Array/" style="font-size: 10.00px;">Left and Right Array</a><a href="/tags/Mac/" style="font-size: 10.00px;">Mac</a><a href="/tags/OO/" style="font-size: 10.00px;">OO</a><a href="/tags/Order/" style="font-size: 10.00px;">Order</a><a href="/tags/Permutation/" style="font-size: 10.00px;">Permutation</a><a href="/tags/PostOrder/" style="font-size: 10.00px;">PostOrder</a><a href="/tags/Probablity/" style="font-size: 10.00px;">Probablity</a><a href="/tags/SKWIC/" style="font-size: 10.00px;">SKWIC</a><a href="/tags/STL/" style="font-size: 10.00px;">STL</a><a href="/tags/Trie/" style="font-size: 10.00px;">Trie</a><a href="/tags/Union-find-set/" style="font-size: 10.00px;">Union-find set</a><a href="/tags/add-num/" style="font-size: 10.00px;">add num</a><a href="/tags/algorithm/" style="font-size: 20.00px;">algorithm</a><a href="/tags/app/" style="font-size: 10.00px;">app</a><a href="/tags/array/" style="font-size: 17.50px;">array</a><a href="/tags/back-n-node/" style="font-size: 10.00px;">back n node</a><a href="/tags/backtrack/" style="font-size: 10.00px;">backtrack</a><a href="/tags/bag/" style="font-size: 10.00px;">bag</a><a href="/tags/bfs/" style="font-size: 12.50px;">bfs</a><a href="/tags/binary-search/" style="font-size: 17.50px;">binary search</a><a href="/tags/binary-search-tree/" style="font-size: 10.00px;">binary search tree</a><a href="/tags/bit/" style="font-size: 15.00px;">bit</a><a href="/tags/brute-force/" style="font-size: 12.50px;">brute force</a><a href="/tags/c/" style="font-size: 10.00px;">c</a><a href="/tags/c-language/" style="font-size: 12.50px;">c language</a><a href="/tags/catalan/" style="font-size: 10.00px;">catalan</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2015 Richard
  
</div>



</footer>
    </aside>
    
    
    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">Richard</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/05/LIS-application/">LIS application</a></h1>
  

      <time datetime="2015-03-04T17:48:10.000Z"><a href="/2015/03/05/LIS-application/">3月 5 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p><a href="http://codeforces.com/contest/4/problem/D" target="_blank" rel="external">http://codeforces.com/contest/4/problem/D</a></p>
<p>这道题目是一道LIS，后来也想到了，但是想dp[i]是以为尾元素为序列的最大值，从输入数据开始dp即使找到了最大值他的起点也未必是&gt;w &gt;h的，<br>然后觉得有点麻烦了，后来发现可以先把&lt;=的都删掉，过滤一遍，这样剩下的任意一个值都是符合头的性质的，也就是严格的从头开始的递增序列。</p>
<p>但是WA了一次，发现dp之后构造解，忘记加递增的条件了(!j || (data[j-1].w&lt;data[i-1].w &amp;&amp; data[j-1].h&lt;data[i-1].h))， 还漏了一次!j的判断，<br>这里其实因为只要返回任意解，直接for就可以解决了，如果是返回所有解，由于有多个分支，因此需要dfs每个分支了。</p>
<pre><code><span class="keyword">struct</span> Node
{
    <span class="keyword">int</span> w, h;
    <span class="keyword">int</span> in;
    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(Node n) <span class="keyword">const</span>
    {
        <span class="keyword">if</span>(w!=n.w) <span class="keyword">return</span> w&lt;n.w;
        <span class="keyword">else</span> <span class="keyword">return</span> h&lt;n.h;
    }
};
<span class="keyword">int</span> main()
{
<span class="comment">/*
#ifndef ONLINE_JUDGE
    freopen ("in.txt" , "r" , stdin);
    freopen ("out.txt" , "w" , stdout);
#endif
*/</span>
    <span class="keyword">int</span> n, w, h, w1, h1;
    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w&gt;&gt;h;
    <span class="keyword">int</span> dp[n+<span class="number">1</span>];
    <span class="stl_container"><span class="built_in">vector</span>&lt;Node&gt;</span> data;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)
    {
        <span class="built_in">cin</span>&gt;&gt;w1&gt;&gt;h1;
        <span class="keyword">if</span>(w1&gt;w &amp;&amp; h1&gt;h)
            data.push_back({w1,h1,i+<span class="number">1</span>});
    }
    sort(data.begin(), data.end());
    n=data.size();
    dp[<span class="number">0</span>]=<span class="number">0</span>;
    <span class="keyword">int</span> maxi=<span class="number">0</span>, maxdp=dp[<span class="number">0</span>];
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
    {
        dp[i]=<span class="number">0</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)
        {
            <span class="keyword">if</span>(!j || (data[j-<span class="number">1</span>].w&lt;data[i-<span class="number">1</span>].w &amp;&amp; data[j-<span class="number">1</span>].h&lt;data[i-<span class="number">1</span>].h))
                dp[i]=max(dp[i], dp[j]+<span class="number">1</span>);
        }
        <span class="keyword">if</span>(dp[i]&gt;maxdp) maxdp=dp[i], maxi=i;
    }
    <span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> ans;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=maxi;i&gt;<span class="number">0</span>;)
    {
        ans.push_back(data[i-<span class="number">1</span>].in);
        <span class="keyword">int</span> j;
        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;i;j++)
        {
            <span class="keyword">if</span>(dp[i]==dp[j]+<span class="number">1</span> &amp;&amp; (!j || (data[j-<span class="number">1</span>].w&lt;data[i-<span class="number">1</span>].w &amp;&amp; data[j-<span class="number">1</span>].h&lt;data[i-<span class="number">1</span>].h)))
                <span class="keyword">break</span>;
        }
        i=j;
    }
    reverse(ans.begin(), ans.end());
    <span class="built_in">cout</span>&lt;&lt;ans.size()&lt;&lt;endl;
    <span class="keyword">for</span>(<span class="keyword">auto</span> e: ans) <span class="built_in">cout</span>&lt;&lt;e&lt;&lt;<span class="string">" "</span>;
    <span class="built_in">cout</span>&lt;&lt;endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 5 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/05/DFS-color-count/">DFS color count</a></h1>
  

      <time datetime="2015-03-04T16:40:59.000Z"><a href="/2015/03/05/DFS-color-count/">3月 5 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>DFS题，但是犯了很多错误，<a href="http://codeforces.com/contest/505/problem/B" target="_blank" rel="external">http://codeforces.com/contest/505/problem/B</a><br>里面的图是多重边，每条边有color，保证两个点之间的边不会重色，也就是加一重循环，但是犯了很多错误，一直WA</p>
<ol>
<li><p>对于输入点构建图忘记加上对立边了，例如mat[a][b]=c, mat[b][a]=c, 之前也翻过类似错误</p>
</li>
<li><p>对于dfs还是不熟练，炒肉大神建议局部变量传递，返回值设计，参数设计。关键是找到递归结构，结果找递归结构的时候已经看错题了。<br>看成路径的个数，而不是color的种类数。int dfs,  dfs(s,e)=sum(i:1-&gt;n &amp;&amp; <s, i="">) dfs(i,e), 这样之后就好写流程.</s,></p>
</li>
</ol>
<p>3.DFS框架是先判是否递归出口，也即找到目的点，如果不到终点，则判断是否已经访问过，当然也可以放在for循环里，但是这样结构清楚，<br>除非是必须比较当前与下一层的一个属性，然后又不加参数这样。这两个出口有时候可以互换，有时又不行，例如之前lc的一道word search，<br>自己第一遍写的时候老是死循环，后来G神帮我调代码就发现了问题，先判是否word到头了，再判是否访问过了。</p>
<ol>
<li><p>由于需要判断当前颜色是否始终一致，如果从起点调用一次dfs，那么第一层的时候颜色是不需要判断的，因此还要设置变量来判断，这样很麻烦，<br>于是for循环调用dfs，但是忘记设置v[s]=1</p>
</li>
<li><p>visit 数组初始化位置不正确，放在每一个query开始</p>
</li>
<li><p>如果是需要遍历整个图的，需要再出口之后v[cur]=1, 同时最后return之前v[cur]=0, 这是中间没有return的情况，如果有的话，必须先v[cur]=0 复原，<br>然后return ，否则有些状态变了返回到上一层的时候不能复原导致出错。</p>
</li>
<li><p>用一个color数组来存是否 计算过且有路径，有的话置为1, 本质和hash一样。</p>
</li>
</ol>
<p>代码如下：</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span>&lt;set&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;map&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;list&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cmath&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;queue&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;stack&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;ctime&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;string&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;vector&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;climits&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstdlib&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstring&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;fstream&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;iostream&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;algorithm&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;unordered_set&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;unordered_map&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;
<span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e2</span> + <span class="number">10</span>;
<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;
<span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;
<span class="comment">//int, -2^31~2^31-1    -2.1*10^9~2.1*10^9 (-2147483648-2147483647)</span>
<span class="comment">//unsigned int, 0~2^32-1  0~4.2*10^9</span>
<span class="comment">//long long  -2^63~2^63-1 -9*10^18~9*10^18</span>
<span class="comment">//unsigned long long 0~2^64-1  0~1.8*10^19</span>
<span class="keyword">bool</span> v[maxn];
<span class="keyword">bool</span> validcolor[maxn];
<span class="keyword">int</span> n;
<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> mat[maxn][maxn];
<span class="keyword">int</span> dfs(<span class="keyword">int</span> cur, <span class="keyword">int</span> e, <span class="keyword">int</span> color)
{
    <span class="keyword">if</span>(cur==e) <span class="keyword">return</span> <span class="number">1</span>;
    <span class="keyword">if</span>(v[cur]) <span class="keyword">return</span> <span class="number">0</span>;
    v[cur]=<span class="number">1</span>;
    <span class="keyword">int</span> sum=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
    {
        <span class="keyword">if</span>(i==cur) <span class="keyword">continue</span>;
        <span class="keyword">for</span>(<span class="keyword">auto</span> ele: mat[cur][i])
            <span class="keyword">if</span>(ele==color &amp;&amp; dfs(i, e, color)) {v[cur]=<span class="number">0</span>; <span class="keyword">return</span> <span class="number">1</span>;}
    }
    v[cur]=<span class="number">0</span>;
    <span class="keyword">return</span> <span class="number">0</span>;
}
<span class="keyword">int</span> main()
{
<span class="comment">/*
#ifndef ONLINE_JUDGE
    freopen ("in.txt" , "r" , stdin);
    freopen ("out.txt" , "w" , stdout);
#endif
*/</span>
    <span class="keyword">int</span>  m, q, qu, qv, x,y, c;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;maxn;j++) mat[i][j].clear();
    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) <span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;c, mat[x][y].push_back(c), mat[y][x].push_back(c);
    <span class="built_in">cin</span>&gt;&gt;q;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q;i++)
    {
        <span class="built_in">cin</span>&gt;&gt;qu&gt;&gt;qv;
        <span class="built_in">memset</span>(validcolor, <span class="number">0</span>, <span class="keyword">sizeof</span> validcolor);
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
        {
            <span class="built_in">memset</span>(v, <span class="number">0</span> ,<span class="keyword">sizeof</span> v);
            <span class="keyword">if</span>(i==qu) <span class="keyword">continue</span>;
            v[qu]=<span class="number">1</span>;
            <span class="keyword">for</span>(<span class="keyword">auto</span> ele: mat[qu][i])
                <span class="keyword">if</span>(!validcolor[ele] &amp;&amp; dfs(i, qv, ele)) validcolor[ele]=<span class="number">1</span>;;
        }
        <span class="keyword">int</span> sum=<span class="number">0</span>;<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) sum+=validcolor[j];
        <span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;endl;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 5 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/04/Valgrind-Massif-profiler/">Valgrind Massif profiler</a></h1>
  

      <time datetime="2015-03-04T08:11:57.000Z"><a href="/2015/03/04/Valgrind-Massif-profiler/">3月 4 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>看到一篇文章用这个工具来查看内存，linux下安装，26设置了代理，/etc/apt/apt/conf.d/apt.conf文件里，设置了实验室代理，<br>但是注释掉似乎还是用不了163的源，安装这个工具，遂放弃。</p>
<ol>
<li>可能源当前坏了</li>
<li>可能代理设置不止修改这个文件生效，因为看到网上是 /etc/apt/apt/apt.conf 这样一个路径</li>
<li>不知道了。</li>
</ol>
<p>这个工具说看heap空间，但实际上也可以设置参数看stack空间占用</p>
<p><a href="http://valgrind.org/docs/manual/ms-manual.html" target="_blank" rel="external">http://valgrind.org/docs/manual/ms-manual.html</a></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 4 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/03/03/push-specific-file-types/">push specific file types</a></h1>
  

      <time datetime="2015-03-03T10:27:15.000Z"><a href="/2015/03/03/push-specific-file-types/">3月 3 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这个问题很常见，因为一个目录下很多文件不是代码，尤其是做Programming Contest，输入输出之类的，因此需要上传指定文件。</p>
<pre><code><span class="title">git</span> add <span class="regexp">*.cpp</span>
</code></pre><p>这个是比较简单的做法，采用wildcard matching, 做了lc之后，就对正则有了新的认识。但是这个有几个缺点</p>
<ol>
<li>可能不能递归到子目录</li>
<li>对于每个文件类型都要敲命令，例如有.h, .cpp等</li>
</ol>
<p>最好的做法是 <a href="http://stackoverflow.com/questions/1139762/ignore-files-that-have-already-been-committed-to-a-git-repository" target="_blank" rel="external">http://stackoverflow.com/questions/1139762/ignore-files-that-have-already-been-committed-to-a-git-repository</a><br>配置.gitignore文件，</p>
<pre><code><span class="keyword">*</span>
!<span class="keyword">*</span>/
!<span class="keyword">*</span>.c
!<span class="keyword">*</span>.h
!<span class="keyword">*</span>.cpp
!<span class="keyword">*</span>.java
</code></pre><p>其中!*表示子文件夹一样处理</p>
<p>这样可以解决上面两个问题</p>
<p>对于已经存在的repository，可以先删除，然后再重新push, 用以下命令组合</p>
<p>如果没有.gitignore文件，先touch .gitignore</p>
<pre><code>git rm -r <span class="comment">--cached .</span>

git add .

git <span class="operator"><span class="keyword">commit</span> -m <span class="string">".gitignore is now working"</span>

git push -u origin <span class="keyword">master</span></span>
</code></pre><p>…or create a new repository on the command line</p>
<pre><code><span class="input"><span class="prompt">echo # MasterThesis &gt;&gt;</span> <span class="constant">README</span>.md</span>
git init
git add <span class="constant">README</span>.md
git commit -m <span class="string">"first commit"</span>
git remote add origin git<span class="variable">@github</span>.<span class="symbol">com:</span>zhangruichang/<span class="constant">MasterThesis</span>.git
git push -u origin master
</code></pre><p>…or push an existing repository from the command line</p>
<pre><code>git remote <span class="keyword">add</span> origin git@github.com:zhangruichang/MasterThesis.git
git <span class="keyword">push</span> -u origin master
</code></pre><p>…or import code from another repository</p>
<p>You can initialize this repository with code from a Subversion, Mercurial, or TFS project.</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 3月 3 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/21/Combination-DP/">Combination DP</a></h1>
  

      <time datetime="2015-02-21T11:48:59.000Z"><a href="/2015/02/21/Combination-DP/">2月 21 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这道题目是APAC2015 RoundB 的ProblemA <a href="https://code.google.com/codejam/contest/4214486/dashboard，" target="_blank" rel="external">https://code.google.com/codejam/contest/4214486/dashboard，</a><br>也是NEU ACM的一道月赛题  <a href="http://acm.neu.edu.cn/hustoj/problem.php?id=1447" target="_blank" rel="external">http://acm.neu.edu.cn/hustoj/problem.php?id=1447</a></p>
<p>并且从这里学习了一下Stirling数，之前其实看过，是离散数学课跳过的内容，还有Catalan数，这两个组合数都是非常重要的，Catalan数<br>1/(n+1) C(2n, n) 是n对括号合法序列数，BOP上买票问题，二叉树个数等等重要的计数问题答案，Striling数相对运用不是特别广泛，<br>例如第一类是指一个n阶permutation可以由k个轮换乘积表示的个数，第二类是n个数划分为k个非空集合的划分方法，<br>二者都是通过递推公式来算的，当然也可以直接有对应的通项公式，但是非常复杂。</p>
<p>一开始看一篇博客，说的第一类Striling数，然后底下一哥们评论说是APAC这题，现在清楚了，他说错了，其实不是的，但是也是类似的递推公式。<br>DP其实就是递推，找出递推式，对于二维状态来说，多半是dp(i,j) 与dp(i-1, j), dp(i, j-1), dp(i-1, j-1) 发生纠葛，然后至于选哪几个，系数是多少<br>就是数学的brainstorm了，可以先看看子问题dp(i,j) 表示前j个位置放置i种数字的计数，前j-1个位置放置i种和i-1种， 如果放置了i种的话，最后一个任意放<br>i种的一种，i<em>dp(i,j-1), 如果是放置了i-1种数字，那么最后一个位置只能放置剩下的一种，但是前面i-1是i种里面的哪i-1种，C(i,i-1)=i, 所以i</em>dp(i-1,j-1)<br>因此得到dp(i,j)=i<em>(dp(i-1,j)+dp(i-1,j-1)),i&lt;j, i=1…m, j=1…n, m&lt;=n, 需要设置base，dp(1,j)=1, dp(i,i)=i!,<br>注意对于这种溢出的情况，MOD一个大数，这个数是1e9+7,int范围内，但是(1e9+7)</em>100可能是超过int 范围的，因此用long long(10^18),递推式也不会超过LL范围，<br>因此代码如下：</p>
<pre><code>LL dp[maxn][maxn];
<span class="keyword">const</span> LL MOD=<span class="number">1e9</span>+<span class="number">7</span>;
<span class="keyword">int</span> main()
{

<span class="preprocessor">#ifndef ONLINE_JUDGE</span>
    freopen (<span class="string">"A-large-practice.in"</span> , <span class="string">"r"</span> , stdin);
    freopen (<span class="string">"A-large-practice.out"</span> , <span class="string">"w"</span> , stdout);
<span class="preprocessor">#<span class="keyword">endif</span></span>

    LL t;
    <span class="built_in">cin</span>&gt;&gt;t;
    <span class="keyword">for</span>(LL ti=<span class="number">1</span>;ti&lt;=t;ti++)
    {
        LL m, n;
        <span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n;<span class="comment">//m&lt;=n</span>
        <span class="keyword">for</span>(LL j=<span class="number">1</span>;j&lt;=n;j++) dp[<span class="number">1</span>][j]=<span class="number">1l</span>l;
        <span class="keyword">for</span>(LL i=<span class="number">2</span>;i&lt;=m;i++) dp[i][i]=(dp[i-<span class="number">1</span>][i-<span class="number">1</span>]*i)%MOD;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=m;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)
            dp[i][j]=(i*(dp[i][j-<span class="number">1</span>]+dp[i-<span class="number">1</span>][j-<span class="number">1</span>]))%MOD;
        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,ti);
        <span class="built_in">cout</span>&lt;&lt;dp[m][n]&lt;&lt;endl;
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}  
</code></pre><p>代码如下，感觉这道是四次APAC ProblemA里最难的，其他的两道编程题，一道DFS，都比较make sense</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 21 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/19/Expectation MaxNum/">Expectation MaxNum</a></h1>
  

      <time datetime="2015-02-19T06:57:57.000Z"><a href="/2015/02/19/Expectation MaxNum/">2月 19 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>VIJOS 情人节比赛<br><a href="https://vijos.org/p/1919" target="_blank" rel="external">https://vijos.org/p/1919</a></p>
<p>这题是算数学期望题目，关键是怎么算的快，不能越界，不能丢精度，关于精度问题好像不是特别重要，关键是不越界。</p>
<p>一共m朵花，第i朵有i片花瓣，i=1…m, 一共随机n次，每次选一朵花，问这n次选到的一朵花花瓣数最大值的期望是多少。</p>
<p>典型数学题，先列公式，E=sum(i=1..m) i<em>(i^n-(i-1)^n)/m^n, 直接计算出现指数，m n较大，显然不行，除非高精度，不过太费周折，<br>于是简化公式，把公式展开，带i的一坨变为 1</em>1^n-1<em>0^n+2</em>2^n-2<em>1^n+….m</em>m^n-m<em>(m-1)^n=m</em>m^n-(1^n+…(m-1)^n)/m^n, 当时<br>还一直在想有没有1^n+..m^n的求和公式，结果发现特别复杂，看来不对，不过一看这个，已经可以计算了，因为每一项都可以除以分母了，是小数的指数次<br>于是直接列公式搞定。</p>
<p>估计有更直接的列公式的方法，可能可以直接到最后一步。</p>
<p>代码如下：</p>
<pre><code><span class="keyword">int</span> main()
{
    <span class="keyword">int</span> m, n;
    <span class="keyword">while</span>(cin&gt;&gt;m&gt;&gt;n)
    {
        <span class="keyword">double</span> <span class="keyword">sum</span>=m;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;m;i++)
        {
            <span class="keyword">sum</span>-=pow(<span class="keyword">double</span>(i)/m, n);
        }
        printf(<span class="string">"%.4f\n"</span>, <span class="keyword">sum</span>);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>这里面有一点组合数学的技巧，或者说对立事件，例如选择最大为i的次数，用1…i里面选n次，减去1..i-1里面选n次，这样剩下的就是至少选一次i片花瓣的次数了，</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 19 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/17/Prime-Ai-Algo/">Prime Ai Algo</a></h1>
  

      <time datetime="2015-02-17T06:45:37.000Z"><a href="/2015/02/17/Prime-Ai-Algo/">2月 17 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>对埃拉托斯特尼筛法进行总结，听名字数学味道就很重。<br>这个算法，我当时面百姓网的时候遇到了，而且我在C语言助教期中考试答题第一题就是这个，当时小胖帮我改估计只有i*i的才拿满分，<br>由于改的过于苛刻，差点出了教学事故。</p>
<p>通过筛选i(2….n/2(sqrt(n)))的倍数来去掉合数，这里面主流的分成两个写法，一种是</p>
<p>筛选2*i开始</p>
<pre><code>P[<span class="number">1.</span>.n]=<span class="number">0</span><span class="comment">//all primes initially</span>
<span class="keyword">for</span>(i=<span class="number">2</span>=&gt;n/<span class="number">2</span>, i++)
{
    <span class="keyword">if</span>(!P[i])
    {
        <span class="keyword">for</span>(j=<span class="number">2</span>i<span class="variable">-&gt;n</span>, j+=i) P[j]=<span class="number">1</span>;
    }
}
</code></pre><p>筛选i*i开始</p>
<pre><code>P[<span class="number">1.</span>.n]=<span class="number">0</span><span class="comment">//all primes initially</span>
<span class="keyword">for</span>(i=<span class="number">2</span>=&gt;sqrt(n), i++)
{
    <span class="keyword">if</span>(!P[i])
    {
        <span class="keyword">for</span>(j=i*i<span class="variable">-&gt;n</span>, j+=i) P[j]=<span class="number">1</span>;
    }
}
</code></pre><p>筛法时间复杂度当时雅虎群里一哥们说是nlglgn, 并发了一个wiki证明过程，几乎线性吧，上述两种第二种测试比较快，通过分析也是<br>显然的，举例6在2<em>i方法里会筛两次，3</em>i(2), 2<em>i(3)， 而后者只会出现一次，i(2)</em>(i+1), 也即后者保证第二个数比第一个数大，这样不重复筛，<br>但是渐进时间复杂度并没有大的改善，应该是常数项的改进。</p>
<p>之前fb hackerup round1第一题是一道求[a,b]以内素因子个数为k的数的个数，这道题目其实是算素因子，我却没有想到好的算法，暴力搞，结果超时了，<br>没跑出来，后来看了G神代码，发现居然是埃式筛法，原来埃式筛法还可以算素因子个数，我果然思考的太少，只知道举一不会反三，只会这题，不会这一系列的题目<br>，但是必须用2<em>i的埃式筛法，第二种错误，例如6有2 3两个素因子，在2</em>i 版本里，出现两次刚好筛了2 3两个素数的倍数，而i<em>i里面，只会2</em>(2+1)里面出现一次，漏掉3的两倍这样<br>一个素数因子3。当时在美国最后一天，住在姚立夫家里，姚立夫真是慷慨，让我睡床，他睡沙发。可能由于时差的关系，晚上很晚就困，早上6点多就醒来，FB上闲逛，发现hackerup，还有一点时间结束，于是打算看一题。</p>
<p>所以要学会举一反三，再次膜拜G神，太厉害了。</p>
<p>总结就是，如果算一定范围内的素数，用i<em>i 2</em>i都可以，但是i<em>i更快一些，但只是常数级别上，而算素因子个数只能2</em>i.另外要学会多思考，多举一反三。</p>
<p>题目：<a href="https://www.facebook.com/hackercup/problems.php?pid=582396081891255&amp;round=344496159068801" target="_blank" rel="external">https://www.facebook.com/hackercup/problems.php?pid=582396081891255&amp;round=344496159068801</a><br>核心代码：</p>
<pre><code><span class="keyword">void</span> F(<span class="keyword">int</span> n)<span class="comment">//Print primes in [1..n]</span>
{
    <span class="built_in">memset</span>(P, <span class="number">0</span>, <span class="keyword">sizeof</span>(P));
    <span class="comment">//fill(P, P+maxn, 1);</span>
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)
    {
        <span class="keyword">if</span>(!P[i])
        {
            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>*i;j&lt;=n;j+=i)
                P[j]++;
        }
    }
    <span class="comment">//for(int i=2;i&lt;=n;i++) if(!P[i]) cout&lt;&lt;i&lt;&lt;" ";</span>
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 17 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/08/Math/">Math</a></h1>
  

      <time datetime="2015-02-08T14:31:26.000Z"><a href="/2015/02/08/Math/">2月 8 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>昨晚CF的B题，由于昨晚和别人聊天，就没做啦，也是因为昨晚OJ太不给力，第一题始终不给答案，我比较蛋疼。</p>
<p><a href="http://codeforces.com/contest/513/problem/B2" target="_blank" rel="external">http://codeforces.com/contest/513/problem/B2</a></p>
<p>第二题是找mth permutation 使得所有子序列的最小值累加和达到最大，什么意思呢，所有permutation有一个最大和，而且有很多个，从这些里找到<br>字典序第m个，今天实验室聚餐吃完，我坐在躺椅上想，发现实际就是2^(n-1)个，然后1&lt;=m&lt;=2^(n-1), 因为最大，1不能再中间，不然某一次2元就有两个1 ，<br>而实际最大sum 一定是sum(i=1-&gt;n) (i(i+1)/2), 由此2也不能是边上，但是可以12… 因此我YY了一个算法，就是for 1-&gt;n, 每次从当前的边界两个选一个，然后剩下的里面也是<br>边界选2， 例如这样就有1.。。2   12.。。。    2.。。1    。。。。21 这样四个，其实2^(n-1) 是从算法里算出来的= =， 然后就可以了哇谁，算法复杂度瞬间从n^2*n!降到n了<br>其实直接上类似求第k个全排列就不需要枚举全部，例如LC上的康拓编码，和那个如出一辙，找规律。</p>
<p>另外我已经第N+1 次饭了  ULL m=1&lt;&lt;(n) 的错误了，当n&gt;=32, 一定要写  ULL m=1ULL&lt;&lt;(n), 因为整数常数默认int, 浮点数默认double, 要么就别装逼，用一个pow, 就不会出错，<br>然后循环里一直除2</p>
<p>代码如下</p>
<pre><code><span class="keyword">int</span> main()
{
    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m)
    {
        <span class="keyword">int</span> ans[n];m--;
        <span class="keyword">int</span> s=<span class="number">0</span>, e=n-<span class="number">1</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)
        {
            ULL mod=(<span class="number">1U</span>LL&lt;&lt;(n-<span class="number">1</span>-i));
            <span class="keyword">if</span>(m/mod==<span class="number">0</span>) ans[s++]=i;
            <span class="keyword">else</span> ans[e--]=i;
            m%=mod;
        }
        ans[s]=n;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">" "</span>;
        <span class="built_in">cout</span>&lt;&lt;endl;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>再附上暴力法</p>
<pre><code><span class="keyword">bool</span> u[maxn];
<span class="keyword">int</span> num[maxn];
<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> cur, ans;
<span class="keyword">int</span> sum, n, ki;
ULL m;
<span class="keyword">int</span> f(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> cur)
{
    <span class="keyword">int</span> sumf=<span class="number">0</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)
    {
        <span class="keyword">int</span> minx=INT_MAX;
        <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;n;j++)
            minx=min(minx, cur[j]), sumf+=minx;
    }
    <span class="keyword">return</span> sumf;
}
<span class="keyword">void</span> dfs(<span class="keyword">int</span> i)
{
    <span class="keyword">if</span>(i&gt;=n)
    {
        <span class="keyword">int</span> fsum=f(cur);
        <span class="keyword">if</span>(fsum==sum)
        {
            <span class="keyword">if</span>(ki==m)
                ans=cur;
            ki++;
        }
        <span class="keyword">return</span> ;
    }
    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)
    {
        <span class="keyword">if</span>(!u[j])
        {
            u[j]=<span class="number">1</span>;
            cur.push_back(num[j]);
            dfs(i+<span class="number">1</span>);
            cur.pop_back();
            u[j]=<span class="number">0</span>;
        }
    }
}


<span class="keyword">int</span> main()
{
    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m)
    {
        <span class="keyword">int</span> ans[n];m--;
        <span class="keyword">int</span> s=<span class="number">0</span>, e=n-<span class="number">1</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)
        {
            ULL mod=(<span class="number">1U</span>LL&lt;&lt;(n-<span class="number">1</span>-i));
            <span class="keyword">if</span>(m/mod==<span class="number">0</span>) ans[s++]=i;
            <span class="keyword">else</span> ans[e--]=i;
            m%=mod;
        }
        ans[s]=n;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">" "</span>;
        <span class="built_in">cout</span>&lt;&lt;endl;
        <span class="comment">/*
        sum=0;
        for(int i=1;i&lt;=n;i++) sum+=(i*(i+1)), num[i-1]=i;
        sum/=2;
        ki=1;cur.clear();ans.clear();memset(u, 0, sizeof u);
        dfs(0);
        for(int i=0;i&lt;n;i++) cout&lt;&lt;ans[i]&lt;&lt;" ";
        cout&lt;&lt;endl;*/</span>
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 8 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/07/reCAPTCHA/">reCAPTCHA</a></h1>
  

      <time datetime="2015-02-06T17:13:56.000Z"><a href="/2015/02/07/reCAPTCHA/">2月 7 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>有人说，人活着就是为了装逼，谁叫我是B哥呢，今天偶然看到微博yangqiang分享的standord一哥一年8偏顶会一作，这哥们本科还是学生物的。。和我都是08级<br>汉。。<a href="http://web.stanford.edu/~jiweil/Publications_ByYear.html" target="_blank" rel="external">http://web.stanford.edu/~jiweil/Publications_ByYear.html</a></p>
<p>然而看到中文写她母亲和他的故事的时候，我被感动，难道是上天为了平衡一个人的得失的安排么，我有点相信神的存在了<br><a href="http://web.stanford.edu/~jiweil/remembering_my_mom.pdf" target="_blank" rel="external">http://web.stanford.edu/~jiweil/remembering_my_mom.pdf</a></p>
<p>今晚看了下自己面FB拍的Stanford的照片，于是闲的蛋疼随便翻了一下斯坦福一些装逼哥的主页，发现一东洋鬼子搞了一个无比装逼的东西，<br><a href="https://clr3.com/" target="_blank" rel="external">https://clr3.com/</a><br>左侧邮箱验证部分。我投降了，这逼装的实在太厉害了。</p>
<p>大概功能就是想看我的email地址，先弹出一框，输个验证码一样的东西再看。哥看日本鬼子不顺眼，但是这逼装的实在不错，于是打算拷贝一下，<br>谁叫我是B哥呢。</p>
<p>于是看到了CMU做了一个类似cloud sourcing 的东西，还是夫神告诉我叫这名的，相当于人类为OCR做一些贡献，同时又避免别人爬到我的email，乱发spam email，<br>实在是一举两得，于是搜到一个逼格有点高的reCAPTCHA，被Google收购了，壮哉大Google，然后我捣腾了一小会儿，从google项目主页获取了一些验证code，<br>然后自己主页也搞了个这装逼的东西，瞬间B格高起来了: )<br><a href="http://admis.fudan.edu.cn/~rczhang/" target="_blank" rel="external">http://admis.fudan.edu.cn/~rczhang/</a></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 7 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2015/02/03/Find-Missing-Number/">Find Missing Number</a></h1>
  

      <time datetime="2015-02-03T12:18:26.000Z"><a href="/2015/02/03/Find-Missing-Number/">2月 3 2015</a></time>
      
  </header>
    <div class="entry">
      
        <p>这题算法不好归为那类，大概是交换类算法吧</p>
<pre><code>class Solution {
<span class="keyword">public</span>:
    <span class="keyword">int</span> <span class="title">firstMissingPositive</span>(<span class="keyword">int</span> A[], <span class="keyword">int</span> n) {
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;)
        {
            <span class="keyword">int</span> cur=A[i]-<span class="number">1</span>;
            <span class="keyword">if</span>(cur&lt;<span class="number">0</span> || cur&gt;=n || A[cur]==A[i])<span class="comment">//这里几次都犯了错误，写成cur==i, cur==i蕴含了A[cur]==A[i],这里应该</span>
            即使是遇到和要交换的数相同，也不能交换，例如<span class="number">1</span> <span class="number">1</span>这种会死循环，所以写A[cur]==A[i]
            {
                i++;
                <span class="keyword">continue</span>;
            }
            swap(A[i],A[cur]);
        }
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)
        {
            <span class="keyword">if</span>(A[i]!=i+<span class="number">1</span>)
                <span class="keyword">return</span> i+<span class="number">1</span>;
        }
        <span class="keyword">return</span> n+<span class="number">1</span>;<span class="comment">//这里第一次写的时候，还漏掉了，因为可能真个数组都是1..n 那么n+1 就是返回值了</span>
    }
};
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://www.weibo.com/u/2689136623"><strong>richard爱闹</strong></a> - 2月 3 2015</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://zhangruichang.com"><strong>Richard</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<nav id="pagination">
  
    <a href="/page/3/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/5/" class="alignright next">下一页</a>
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://admis.fudan.edu.cn/~rczhang">About Me</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://blog.csdn.net/richardzrc">Csdn Blog</a></div>
    
      <div class="tabbaritem"><a class="next" href="http://richard_zhang.drivehq.com/">Previous Page</a></div>
    
</div>


  </div>
</body>
</html>